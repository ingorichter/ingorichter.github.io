<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://ingo-richter.io/images/favicon.png><title>Hugo, Themes and My Theme Customization&nbsp;|&nbsp;Today is Tomorrow's Past</title><meta name=title content="Hugo, Themes and My Theme Customization"><meta name=description content="TL;DR
Hugo&rsquo;s file lookup magic was biting me and was causing the 3rd party template to use a file with the same name from my blog assets directory.
How to waste lots of hours
I use Hugo for my Blog with a custom theme hugo future imperfect slim.
I made some customizations to my blog a while ago. I added baguetteBox.js for better image galleries and lazySizes to better support different image sizes in the gallery. I bundled the files and minified them in a single javascript file to reduce the number of requests to the server."><meta name=keywords content="TIL,hugo,themes,customization,"><meta name=author content="Ingo Richter"><meta property="og:url" content="https://ingo-richter.io/post/2022/hugo-themes-and-my-theme-customization/"><meta property="og:site_name" content="Today is Tomorrow's Past"><meta property="og:title" content="Hugo, Themes and My Theme Customization"><meta property="og:description" content="TL;DR Hugo’s file lookup magic was biting me and was causing the 3rd party template to use a file with the same name from my blog assets directory.
How to waste lots of hours I use Hugo for my Blog with a custom theme hugo future imperfect slim.
I made some customizations to my blog a while ago. I added baguetteBox.js for better image galleries and lazySizes to better support different image sizes in the gallery. I bundled the files and minified them in a single javascript file to reduce the number of requests to the server."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-01-18T00:00:00-08:00"><meta property="article:modified_time" content="2022-01-18T00:00:00-08:00"><meta property="article:tag" content="TIL"><meta property="article:tag" content="hugo"><meta property="article:tag" content="themes"><meta property="article:tag" content="customization"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hugo, Themes and My Theme Customization"><meta name=twitter:description content="TL;DR Hugo’s file lookup magic was biting me and was causing the 3rd party template to use a file with the same name from my blog assets directory.
How to waste lots of hours I use Hugo for my Blog with a custom theme hugo future imperfect slim.
I made some customizations to my blog a while ago. I added baguetteBox.js for better image galleries and lazySizes to better support different image sizes in the gallery. I bundled the files and minified them in a single javascript file to reduce the number of requests to the server."><meta itemprop=name content="Hugo, Themes and My Theme Customization"><meta itemprop=description content="TL;DR Hugo’s file lookup magic was biting me and was causing the 3rd party template to use a file with the same name from my blog assets directory.
How to waste lots of hours I use Hugo for my Blog with a custom theme hugo future imperfect slim.
I made some customizations to my blog a while ago. I added baguetteBox.js for better image galleries and lazySizes to better support different image sizes in the gallery. I bundled the files and minified them in a single javascript file to reduce the number of requests to the server."><meta itemprop=datePublished content="2022-01-18T00:00:00-08:00"><meta itemprop=dateModified content="2022-01-18T00:00:00-08:00"><meta itemprop=wordCount content="372"><meta itemprop=keywords content="TIL,hugo,themes,customization"><meta name=referrer content="no-referrer-when-downgrade"><link href=https://ingo-richter.io/bundle.min.css rel=stylesheet><link rel=alternate type=application/rss+xml href=https://ingo-richter.io/post/2022/hugo-themes-and-my-theme-customization/index.xml title="Today is Tomorrow's Past"><meta name=fediverse:creator content="@ingorichter@mastodon.social"><script src=https://ingo-richter.io/js/scripts.min.js></script></head><body><header><nav><a href=https://ingo-richter.io/>Home</a>
<a href=https://ingo-richter.io/about/>About</a>
<a href=https://ingo-richter.io/resume/resume.pdf>Resume</a>
<a href=https://ingo-richter.io/post/>Posts</a>
<a href=https://ingo-richter.io/cv19wfh/>CV19WFH</a>
<a href=https://ingo-richter.io/wallpaper/>Wallpaper</a>
<a href=https://ingo-richter.io/categories/>Categories</a>
<a href=https://ingo-richter.io/now/>Now</a>
<a href=https://ingo-richter.io/index.xml><svg class="icon" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
RSS</a></nav><h1>Hugo, Themes and My Theme Customization</h1></header><main><content class=published-date>Published on <time datetime=2022-01-18T00:00:00-08:00>Tuesday, January 18, 2022</time>
</content><content><h2 id=tldr>TL;DR</h2><p><a href=https://gohugo.io>Hugo</a>&rsquo;s file lookup magic was biting me and was causing the 3rd party template to use a file with the same name from my blog assets directory.</p><h2 id=how-to-waste-lots-of-hours>How to waste lots of hours</h2><p>I use <a href=https://gohugo.io>Hugo</a> for my <a href=https://ingo-richter.io>Blog</a> with a custom theme <a href=https://github.com/pacollins/hugo-future-imperfect-slim>hugo future imperfect slim</a>.</p><p>I made some customizations to my blog a while ago. I added <a href=https://feimosi.github.io/baguetteBox.js/>baguetteBox.js</a> for better image galleries and <a href=https://afarkas.github.io/lazysizes/index.html>lazySizes</a> to better support different image sizes in the gallery. I <a href=https://gohugo.io/hugo-pipes/bundling/>bundled the files</a> and minified them in a single javascript file to reduce the number of requests to the server.</p><p>I combined the mentioned JavaScript files into one file by having a customized version of <code>scripts.html</code> file that I copied from the original template source into the <code>layouts/partials</code> directory. The following lines show the steps to combine the js files into <code>js/scripts.js</code>.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span><span style=color:#89dceb;font-weight:700>{{</span> <span style=color:#f5e0dc>$baguetteBox</span> :<span style=color:#89dceb;font-weight:700>=</span> resources.Get <span style=color:#a6e3a1>&#34;js/external/baguetteBox.js&#34;</span> <span style=color:#89dceb;font-weight:700>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">2</span><span><span style=color:#89dceb;font-weight:700>{{</span> <span style=color:#f5e0dc>$lazysizes</span> :<span style=color:#89dceb;font-weight:700>=</span> resources.Get <span style=color:#a6e3a1>&#34;js/external/lazysizes.js&#34;</span> <span style=color:#89dceb;font-weight:700>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">3</span><span><span style=color:#89dceb;font-weight:700>{{</span> <span style=color:#f5e0dc>$main</span> :<span style=color:#89dceb;font-weight:700>=</span> resources.Get <span style=color:#a6e3a1>&#34;js/main.js&#34;</span> <span style=color:#89dceb;font-weight:700>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">4</span><span><span style=color:#89dceb;font-weight:700>{{</span> <span style=color:#f5e0dc>$scripts</span> :<span style=color:#89dceb;font-weight:700>=</span> slice <span style=color:#f5e0dc>$baguetteBox</span> <span style=color:#f5e0dc>$lazysizes</span> <span style=color:#f5e0dc>$main</span> | resources.Concat <span style=color:#a6e3a1>&#34;js/scripts.js&#34;</span> | resources.Minify <span style=color:#89dceb;font-weight:700>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">5</span><span>&lt;script <span style=color:#f5e0dc>src</span><span style=color:#89dceb;font-weight:700>=</span><span style=color:#a6e3a1>&#34;{{ </span><span style=color:#f5e0dc>$scripts</span><span style=color:#a6e3a1>.RelPermalink }}&#34;</span>&gt;&lt;/script&gt;</span></span></code></pre></div><p>The problematic file in this process is <code>js/main.js</code>. The theme uses a file with this name as a template to generate other files during the blog creation. The template mechanism was using my version of the file, and the template mechanism failed, and then some essential files from the theme were missing. Those missing generated files led my blog to <strong>misbehave</strong> in some areas where the JavaScript files were required (search, language selection, sharing).</p><p>The <a href=https://gohugo.io/templates/lookup-order/>Lookup Order</a> describes how the lookup works to create the final layout for a section. What they don&rsquo;t mention at all is the fact that the lookup logic is not only applied to layout files but also JavaScript files. I don&rsquo;t know if this holds for other file types.</p><p>After some frustrating hours of debugging and examining my blog configuration, and inspecting the theme directory structure, I finally resolved this issue. I renamed my file from <code>main.js</code> to <code>externMain.js</code>. Any name would be better than <code>main.js</code>.</p><p>So, if you are encountering broken functionality or missing files after tinkering with a Hugo theme, I recommend inspecting your modified and added files. Perhaps you have a similar situation that I was fighting.</p><p>Thanks for reading!</p></content><p><a href=https://ingo-richter.io/blog/til/>#TIL</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/hugo/>#hugo</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/themes/>#themes</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/customization/>#customization</a>&nbsp;&nbsp;</p><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ingorichterio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer><span>© 2025 Ingo Richter</span>
<span>|
Made with
<a href=https://github.com/maolonglong/hugo-simple/>Hugo ʕ•ᴥ•ʔ Simple</a></span></footer><script id=analytics async src=https://umami.familie-richter.de/script.js data-website-id=98a5f2cb-a53b-4d84-9133-bac4957e9e9f></script></body></html>