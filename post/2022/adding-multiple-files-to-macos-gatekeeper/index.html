<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=/images/favicon.png><title>Adding Multiple Files to Macos Gatekeeper&nbsp;|&nbsp;Today is Tomorrow's Past</title>
<meta name=title content="Adding Multiple Files to Macos Gatekeeper"><meta name=description content="The Gatekeeper
Before I forget what I learned today, I better write it down.
Gatekeeper on macOS ensures that properly signed and authentic apps and other executable files, including dylibs and kexts, are executed on your Mac.
But if you want to execute an open-source tool installed by brew or some other way on your machine, you will usually see something like this confirmation dialog. In this case, for an app FSNotes installed with brew."><meta name=keywords content="TIL,"><meta name=author content="Ingo Richter"><meta property="og:url" content="https://ingo-richter.io/post/2022/adding-multiple-files-to-macos-gatekeeper/"><meta property="og:site_name" content="Today is Tomorrow's Past"><meta property="og:title" content="Adding Multiple Files to Macos Gatekeeper"><meta property="og:description" content="The Gatekeeper Before I forget what I learned today, I better write it down.
Gatekeeper on macOS ensures that properly signed and authentic apps and other executable files, including dylibs and kexts, are executed on your Mac. But if you want to execute an open-source tool installed by brew or some other way on your machine, you will usually see something like this confirmation dialog. In this case, for an app FSNotes installed with brew."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-02-10T00:00:00-08:00"><meta property="article:modified_time" content="2022-02-10T00:00:00-08:00"><meta property="article:tag" content="TIL"><meta name=twitter:card content="summary"><meta name=twitter:title content="Adding Multiple Files to Macos Gatekeeper"><meta name=twitter:description content="The Gatekeeper Before I forget what I learned today, I better write it down.
Gatekeeper on macOS ensures that properly signed and authentic apps and other executable files, including dylibs and kexts, are executed on your Mac. But if you want to execute an open-source tool installed by brew or some other way on your machine, you will usually see something like this confirmation dialog. In this case, for an app FSNotes installed with brew."><meta itemprop=name content="Adding Multiple Files to Macos Gatekeeper"><meta itemprop=description content="The Gatekeeper Before I forget what I learned today, I better write it down.
Gatekeeper on macOS ensures that properly signed and authentic apps and other executable files, including dylibs and kexts, are executed on your Mac. But if you want to execute an open-source tool installed by brew or some other way on your machine, you will usually see something like this confirmation dialog. In this case, for an app FSNotes installed with brew."><meta itemprop=datePublished content="2022-02-10T00:00:00-08:00"><meta itemprop=dateModified content="2022-02-10T00:00:00-08:00"><meta itemprop=wordCount content="426"><meta itemprop=keywords content="TIL"><meta name=referrer content="no-referrer-when-downgrade"><link href=/bundle.min.css rel=stylesheet><link rel=alternate type=application/rss+xml href=/post/2022/adding-multiple-files-to-macos-gatekeeper/index.xml title="Today is Tomorrow's Past"><meta name=fediverse:creator content="@ingorichter@mastodon.social"><script src=/js/scripts.min.js></script></head><body><header><nav><a href=/>Home</a>
<a href=/about/>About</a>
<a href=/resume/resume.pdf>Resume</a>
<a href=/post/>Posts</a>
<a href=/cv19wfh/>CV19WFH</a>
<a href=/wallpaper/>Wallpaper</a>
<a href>Categories</a>
<a href=/index.xml><svg class="icon" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
RSS</a></nav><h1>Adding Multiple Files to Macos Gatekeeper</h1></header><main><content class=published-date>Published on <time datetime=2022-02-10T00:00:00-08:00>Thursday, February 10, 2022</time>
</content><content><h2 id=the-gatekeeper>The Gatekeeper</h2><p>Before I forget what I learned today, I better write it down.</p><p>Gatekeeper on macOS ensures that properly signed and authentic apps and other executable files, including dylibs and kexts, are executed on your Mac.
But if you want to execute an open-source tool installed by <a href=https://brew.sh>brew</a> or some other way on your machine, you will usually see something like this confirmation dialog. In this case, for an app <strong>FSNotes</strong> installed with brew.</p><figure><img class=lazyload data-src=/post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation.png data-srcset="/post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_5362e5feaf55dfe1.png 20w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_afeb084d5b9e69c1.png 320w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_c44b1de4f5281b57.png 480w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_6600ed7825a7f7d8.png 768w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_2f7137b9f79f1c4f.png 1024w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_fa345b5a1cb16477.png 1280w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_7236163b98637c31.png 1600w, /post/2022/adding-multiple-files-to-macos-gatekeeper/gatekeeperConfirmation_hu_64ccdd26a70dfec0.png 1920w" alt="macOS Gatekeeper Confirmation Dialog"><figcaption>macOS Gatekeeper Confirmation Dialog</figcaption></figure><p>It&rsquo;s required to confirm this dialog before the app is launched.
Okay, that&rsquo;s fine so far.</p><h2 id=adding-more-executable-files-at-once-to-the-system-policy-rule-database>Adding more executable files at once to the system policy rule database</h2><p>Having one executable to confirm might be fine and not a big deal. In my case, I was using a tool <a href=https://oclint.org/>OCLint</a> that uses rules to lint Objective-C code. Those rules come in the form of dylibs. The current OCLint version installed on my machine has <strong>76</strong>! separate dylibs loaded dynamically when OCLint needs the specific rule to lint the source code.</p><p>Using OCLint for the first will ask you to load one of the rule dylibs. Accept and try again. Now the next dylibs need your confirmation, and so on. That is tedious to add all required dylibs manually. There must be a better way to solve this problem.</p><h2 id=the-command-line-to-the-rescue>The Command-Line to the Rescue</h2><p>After some searching, I found out that <code>spctl</code> (System Policy Control) is the tool to modify Gatekeeper (the end-user friendly name) and manipulate the policy system rule database that decides which code is allowed to be executed and which code is not.</p><p>To find out more about <code>spctl</code> run <code>man spctl</code> in a terminal app of your choice.</p><p>Only a small subset of <code>spclt</code> options are required to solve my problem.
One thing that comes in handy is that you can create a label to add rules to this label and to enable/disable all rules that have this label.</p><p>In the end, I needed two things</p><h3 id=i-added-every-oclint-rule-dylib-to-the-label-oclint>I added every OCLint rule dylib to the label OCLint</h3><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span>find /usr/local/Caskroom/oclint/21.10/oclint-21.10/lib/oclint -name <span style=color:#a6e3a1>&#34;*.dylib&#34;</span> -print0 | xargs -0 sudo spctl --add --label <span style=color:#a6e3a1>&#34;OCLint&#34;</span></span></span></code></pre></div><h3 id=i-enabled-all-rules-in-the-oclint-label>I enabled all rules in the OCLint label</h3><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span>sudo spctl --enable --label <span style=color:#a6e3a1>&#34;OCLint&#34;</span></span></span></code></pre></div><p>Done! Now OCLint could work without asking for confirmation for every single dylib.</p><h2 id=resources>Resources</h2><p>The <a href=https://www.cnet.com/tech/computing/how-to-manage-os-x-gatekeeper-from-the-command-line/>Post</a> helped me to learn about <code>spctl</code>.</p><p>I&rsquo;m using the term rule here for two different systems. It might be confusing at times, but <code>spctl</code> uses the term Rule for every executable in the database. OCLint consists of linting rules for Objective-C source code.</p><p>Thanks for reading</p></content><p><a href=/blog/til/>#TIL</a>&nbsp;&nbsp;</p><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ingorichterio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer><span>© 2025 Ingo Richter</span>
<span>|
Made with
<a href=https://github.com/maolonglong/hugo-simple/>Hugo ʕ•ᴥ•ʔ Simple</a></span></footer><script id=analytics async src=https://umami.familie-richter.de/script.js data-website-id=98a5f2cb-a53b-4d84-9133-bac4957e9e9f></script></body></html>