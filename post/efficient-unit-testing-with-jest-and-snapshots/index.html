<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://ingo-richter.io/images/favicon.png><title>Efficient JavaScript Unit Testing with Jest and Snapshots&nbsp;|&nbsp;Today is Tomorrow's Past</title><meta name=title content="Efficient JavaScript Unit Testing with Jest and Snapshots"><meta name=description content="Make your software testing life easier with Jest and Snapshots to test your javascript code"><meta name=keywords content="Git,Programming,Tips,Tools,TIL,"><meta name=author content="Ingo Richter"><meta property="og:url" content="https://ingo-richter.io/post/efficient-unit-testing-with-jest-and-snapshots/"><meta property="og:site_name" content="Today is Tomorrow's Past"><meta property="og:title" content="Efficient JavaScript Unit Testing with Jest and Snapshots"><meta property="og:description" content="Make your software testing life easier with Jest and Snapshots to test your javascript code"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-04-06T11:55:51-07:00"><meta property="article:modified_time" content="2017-04-06T11:55:51-07:00"><meta property="article:tag" content="Git"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Tips"><meta property="article:tag" content="Tools"><meta property="article:tag" content="TIL"><meta name=twitter:card content="summary"><meta name=twitter:title content="Efficient JavaScript Unit Testing with Jest and Snapshots"><meta name=twitter:description content="Make your software testing life easier with Jest and Snapshots to test your javascript code"><meta itemprop=name content="Efficient JavaScript Unit Testing with Jest and Snapshots"><meta itemprop=description content="Make your software testing life easier with Jest and Snapshots to test your javascript code"><meta itemprop=datePublished content="2017-04-06T11:55:51-07:00"><meta itemprop=dateModified content="2017-04-06T11:55:51-07:00"><meta itemprop=wordCount content="1292"><meta itemprop=keywords content="Git,Programming,Tips,Tools,TIL"><meta name=referrer content="no-referrer-when-downgrade"><link href=https://ingo-richter.io/bundle.min.css rel=stylesheet><link rel=alternate type=application/rss+xml href=https://ingo-richter.io/post/efficient-unit-testing-with-jest-and-snapshots/index.xml title="Today is Tomorrow's Past"><meta name=fediverse:creator content="@ingorichter@mastodon.social"><script src=https://ingo-richter.io/js/scripts.min.js></script></head><body><header><nav><a href=https://ingo-richter.io/>Home</a>
<a href=https://ingo-richter.io/about/>About</a>
<a href=https://ingo-richter.io/resume/resume.pdf>Resume</a>
<a href=https://ingo-richter.io/post/>Posts</a>
<a href=https://ingo-richter.io/cv19wfh/>CV19WFH</a>
<a href=https://ingo-richter.io/wallpaper/>Wallpaper</a>
<a href>Categories</a>
<a href=https://ingo-richter.io/now/>Now</a>
<a href=https://ingo-richter.io/index.xml><svg class="icon" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
RSS</a></nav><h1>Efficient JavaScript Unit Testing with Jest and Snapshots</h1><p>Make your software testing life easier with Jest and Snapshots to test your javascript code</p></header><main><content class=published-date>Published on <time datetime=2017-04-06T11:55:51-07:00>Thursday, April 6, 2017</time>
</content><content><p>Let&rsquo;s start with a bold statement:</p><blockquote><p><strong>We all love to write unit great tests for our code. More or less.</strong></p><p>— Unknown Programmer</p></blockquote><p>Writing unit tests for my code mostly follows this pattern</p><ol><li>Write a test and make it fail (red)</li><li>Write the function to fix the test (implement function)</li><li>Start over with step 1</li></ol><p>For one of my projects, I was using <a href=https://facebook.github.io/jest/>jest</a>. It&rsquo;s fast now, and it has several features that I highly value. Most of them integrated code coverage and Snapshot testing.</p><h2 id=snapshot-testing-whats-that>Snapshot testing? What&rsquo;s that?</h2><p>When I first saw the part about Snapshot testing, I wasn&rsquo;t interested. Okay, it was more that I thought, well, I don&rsquo;t see a big advantage here over the traditional approach of testing my code. I&rsquo;m calling functions and make sure that the result of those functions matches my expectations. That&rsquo;s pretty simple with a function that returns a simple result
Writing unit tests for my code mostly follows this pattern</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span><span style=color:#f38ba8>function</span> add(a, b) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">2</span><span>  <span style=color:#cba6f7>return</span> a <span style=color:#89dceb;font-weight:700>+</span> b;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">3</span><span>};
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">5</span><span>test(<span style=color:#a6e3a1>&#34;Verify that 1 + 3 equals 4&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">6</span><span>  expect(add(<span style=color:#fab387>1</span>, <span style=color:#fab387>3</span>)).toBe(<span style=color:#fab387>4</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">7</span><span>});</span></span></code></pre></div><p>This is simple and doesn’t require much work.</p><p>How about this?</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1</span><span><span style=color:#f38ba8>function</span> createTodoItem(subject, projects, contexts, due) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2</span><span>    <span style=color:#cba6f7>return</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3</span><span>        <span style=color:#a6e3a1>&#34;subject&#34;</span><span style=color:#89dceb;font-weight:700>:</span> subject,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4</span><span>        <span style=color:#a6e3a1>&#34;projects&#34;</span><span style=color:#89dceb;font-weight:700>:</span> projects,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5</span><span>        <span style=color:#a6e3a1>&#34;contexts&#34;</span><span style=color:#89dceb;font-weight:700>:</span> contexts,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6</span><span>        <span style=color:#a6e3a1>&#34;due&#34;</span><span style=color:#89dceb;font-weight:700>:</span> due,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7</span><span>        <span style=color:#a6e3a1>&#34;completed&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8</span><span>        <span style=color:#a6e3a1>&#34;archived&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9</span><span>        <span style=color:#a6e3a1>&#34;isPriority&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11</span><span>};
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13</span><span>test(<span style=color:#a6e3a1>&#34;Verify that new todo item has all required fields&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14</span><span>    <span style=color:#cba6f7>const</span> newTodoItem <span style=color:#89dceb;font-weight:700>=</span> createTodoItem(<span style=color:#a6e3a1>&#34;New Task&#34;</span>, [<span style=color:#a6e3a1>&#34;blog&#34;</span>], [<span style=color:#a6e3a1>&#34;learn&#34;</span>, <span style=color:#a6e3a1>&#34;programming&#34;</span>], <span style=color:#a6e3a1>&#34;2017-04-17&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15</span><span>    <span style=color:#cba6f7>const</span> expectedTodoItem <span style=color:#89dceb;font-weight:700>=</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17</span><span>    expect(newTodoItem).toEqual(expectedTodoItem);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">18</span><span>});</span></span></code></pre></div><p>As expected, the output is telling me, that there is something missing. Yes, I didn’t write yet the expected object to compare the result with. I’m too lazy, and I always want to avoid writing it. What I’m doing instead, is to call the function, copy the result and create my expected result object with this data. But for now, I’m not going to do it. Let’s see, how Snapshot testing will help solve this task.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1</span><span>Verify that <span style=color:#cba6f7>new</span> todo item has all required fields
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3</span><span>    expect(received).toEqual(expected)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5</span><span>    Expected value to equal<span style=color:#89dceb;font-weight:700>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6</span><span>      {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7</span><span>    Received<span style=color:#89dceb;font-weight:700>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8</span><span>      {<span style=color:#a6e3a1>&#34;archived&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>, <span style=color:#a6e3a1>&#34;completed&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>, <span style=color:#a6e3a1>&#34;contexts&#34;</span><span style=color:#89dceb;font-weight:700>:</span> [<span style=color:#a6e3a1>&#34;learn&#34;</span>, <span style=color:#a6e3a1>&#34;programming&#34;</span>], <span style=color:#a6e3a1>&#34;due&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>&#34;2017-04-17&#34;</span>, <span style=color:#a6e3a1>&#34;isPriority&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>, <span style=color:#a6e3a1>&#34;projects&#34;</span><span style=color:#89dceb;font-weight:700>:</span> [<span style=color:#a6e3a1>&#34;blog&#34;</span>], <span style=color:#a6e3a1>&#34;subject&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>&#34;New Task&#34;</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10</span><span>    Difference<span style=color:#89dceb;font-weight:700>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12</span><span>    <span style=color:#89dceb;font-weight:700>-</span> Expected
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13</span><span>    <span style=color:#89dceb;font-weight:700>+</span> Received
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15</span><span>    <span style=color:#89dceb;font-weight:700>-</span><span style=color:#89dceb>Object</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16</span><span>    <span style=color:#89dceb;font-weight:700>+</span><span style=color:#89dceb>Object</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;archived&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">18</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;completed&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">19</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;contexts&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#89dceb>Array</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">20</span><span>    <span style=color:#89dceb;font-weight:700>+</span>    <span style=color:#a6e3a1>&#34;learn&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">21</span><span>    <span style=color:#89dceb;font-weight:700>+</span>    <span style=color:#a6e3a1>&#34;programming&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">22</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">23</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;due&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>&#34;2017-04-17&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">24</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;isPriority&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">25</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;projects&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#89dceb>Array</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">26</span><span>    <span style=color:#89dceb;font-weight:700>+</span>    <span style=color:#a6e3a1>&#34;blog&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">27</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">28</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;subject&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>&#34;New Task&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">29</span><span>    <span style=color:#89dceb;font-weight:700>+</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">30</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">31</span><span>      at <span style=color:#89dceb>Object</span>.<span style=color:#89dceb;font-weight:700>&lt;</span>anonymous<span style=color:#89dceb;font-weight:700>&gt;</span>.test (__tests__<span style=color:#89dceb;font-weight:700>/</span>newTask<span style=color:#89dceb;font-weight:700>-</span>test.js<span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>7</span><span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>25</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">32</span><span>      at process._tickCallback (internal<span style=color:#89dceb;font-weight:700>/</span>process<span style=color:#89dceb;font-weight:700>/</span>next_tick.js<span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>109</span><span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>7</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">33</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">34</span><span> PASS  __tests__<span style=color:#89dceb;font-weight:700>/</span>add<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">35</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">36</span><span>Test Suites<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>1</span> failed, <span style=color:#fab387>1</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">37</span><span>Tests<span style=color:#89dceb;font-weight:700>:</span>       <span style=color:#fab387>1</span> failed, <span style=color:#fab387>1</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">38</span><span>Snapshots<span style=color:#89dceb;font-weight:700>:</span>   <span style=color:#fab387>0</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">39</span><span>Time<span style=color:#89dceb;font-weight:700>:</span>        <span style=color:#fab387>1.042</span>s
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">40</span><span>Ran all test suites.</span></span></code></pre></div><p>Yeah, I was lazy and didn’t populate <code>expectedTodoItem</code> with all the fields I was expecting. This is the point, where Snapshot testing comes into play. It helps me lazy programmer to avoid writing unnecessary code only to verify my assumptions about the outcome of that function.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1</span><span><span style=color:#f38ba8>function</span> createTodoItem(subject, projects, contexts, due) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2</span><span>    <span style=color:#cba6f7>return</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3</span><span>        <span style=color:#a6e3a1>&#34;subject&#34;</span><span style=color:#89dceb;font-weight:700>:</span> subject,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4</span><span>        <span style=color:#a6e3a1>&#34;projects&#34;</span><span style=color:#89dceb;font-weight:700>:</span> projects,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5</span><span>        <span style=color:#a6e3a1>&#34;contexts&#34;</span><span style=color:#89dceb;font-weight:700>:</span> contexts,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6</span><span>        <span style=color:#a6e3a1>&#34;due&#34;</span><span style=color:#89dceb;font-weight:700>:</span> due,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7</span><span>        <span style=color:#a6e3a1>&#34;completed&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8</span><span>        <span style=color:#a6e3a1>&#34;archived&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9</span><span>        <span style=color:#a6e3a1>&#34;isPriority&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11</span><span>};
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13</span><span>test(<span style=color:#a6e3a1>&#34;Verify that new todo item has all required fields&#34;</span>, () =&gt; {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14</span><span>    <span style=color:#cba6f7>const</span> newTodoItem <span style=color:#89dceb;font-weight:700>=</span> createTodoItem(<span style=color:#a6e3a1>&#34;New Task&#34;</span>, [<span style=color:#a6e3a1>&#34;blog&#34;</span>], [<span style=color:#a6e3a1>&#34;learn&#34;</span>, <span style=color:#a6e3a1>&#34;programming&#34;</span>], <span style=color:#a6e3a1>&#34;2017-04-17&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16</span><span>    expect(newTodoItem).toMatchSnapshot();
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17</span><span>});</span></span></code></pre></div><p>And here the result.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span>PASS  __tests__<span style=color:#89dceb;font-weight:700>/</span>newTask<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">2</span><span>PASS  __tests__<span style=color:#89dceb;font-weight:700>/</span>add<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">4</span><span>Test Suites<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>2</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">5</span><span>Tests<span style=color:#89dceb;font-weight:700>:</span>       <span style=color:#fab387>2</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">6</span><span>Snapshots<span style=color:#89dceb;font-weight:700>:</span>   <span style=color:#fab387>1</span> passed, <span style=color:#fab387>1</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">7</span><span>Time<span style=color:#89dceb;font-weight:700>:</span>        <span style=color:#fab387>0.816</span>s, estimated <span style=color:#fab387>1</span>s
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">8</span><span>Ran all test suites.</span></span></code></pre></div><h2 id=three-notable-things>Three notable things</h2><ol><li>I still didn’t provide a full-fledged object that matches my expectation</li><li><code>toMatchSnapshot()</code> was the only code change in the test</li><li>The number of Snapshots in the status output of Jest is now 1!</li></ol><p>What happened? Jest was taking a Snapshot for that test and was happy with the result. Under the hood, Jest created a <code>__snapshots__</code> directory in my <code>__tests__</code> directory and saved the output of the test result. The file is named after the file containing the test. In this case, it’s <code>newTask-test.js.snap</code>. Here are the contents of that Snapshot file.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1</span><span><span style=color:#6c7086;font-style:italic>// Jest Snapshot v1, &lt;https://goo.gl/fbAQLP&gt;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2</span><span><span style=color:#6c7086;font-style:italic></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3</span><span>exports[<span style=color:#a6e3a1>`Verify that new todo item has all required fields 1`</span>] <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>`
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4</span><span><span style=color:#a6e3a1>Object {
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5</span><span><span style=color:#a6e3a1>  &#34;archived&#34;: false,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6</span><span><span style=color:#a6e3a1>  &#34;completed&#34;: false,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7</span><span><span style=color:#a6e3a1>  &#34;contexts&#34;: Array [
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8</span><span><span style=color:#a6e3a1>    &#34;learn&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9</span><span><span style=color:#a6e3a1>    &#34;programming&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10</span><span><span style=color:#a6e3a1>  ],
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11</span><span><span style=color:#a6e3a1>  &#34;due&#34;: &#34;2017-04-17&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12</span><span><span style=color:#a6e3a1>  &#34;isPriority&#34;: false,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13</span><span><span style=color:#a6e3a1>  &#34;projects&#34;: Array [
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14</span><span><span style=color:#a6e3a1>    &#34;blog&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15</span><span><span style=color:#a6e3a1>  ],
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16</span><span><span style=color:#a6e3a1>  &#34;subject&#34;: &#34;New Task&#34;,
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17</span><span><span style=color:#a6e3a1>}
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">18</span><span><span style=color:#a6e3a1>`</span>;</span></span></code></pre></div><p>The key of the exports object is the name of the test itself. The value of it is the result from <code>createTodoItem("New Task", ["blog"], ["learn", "programming"], "2017-04-17")</code>. That is great. I didn’t have to type a line of code for the expected result of this function. By doing a quick visual inspection of the output, I can confirm that this is the expected output.</p><p>Now it gets interesting. I’m going to change the return object of the function. The result object will have a new key <code>completedDate</code> and the <code>completed</code> flag will be removed. Let’s see how Jest handles the situation without making any change to the existing, and currently passing, test.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1</span><span> FAIL  __tests__<span style=color:#89dceb;font-weight:700>/</span>newTask<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2</span><span>  <span style=color:#f38ba8>●</span> Verify that <span style=color:#cba6f7>new</span> todo item has all required fields
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4</span><span>    expect(value).toMatchSnapshot()
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6</span><span>    Received value does not match stored snapshot <span style=color:#fab387>1.</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8</span><span>    <span style=color:#89dceb;font-weight:700>-</span> Snapshot
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9</span><span>    <span style=color:#89dceb;font-weight:700>+</span> Received
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11</span><span>    <span style=color:#f38ba8>@@</span> <span style=color:#89dceb;font-weight:700>-</span><span style=color:#fab387>1</span>,<span style=color:#fab387>8</span> <span style=color:#89dceb;font-weight:700>+</span><span style=color:#fab387>1</span>,<span style=color:#fab387>8</span> <span style=color:#f38ba8>@@</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12</span><span>     <span style=color:#89dceb>Object</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13</span><span>       <span style=color:#a6e3a1>&#34;archived&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">14</span><span>    <span style=color:#89dceb;font-weight:700>-</span>  <span style=color:#a6e3a1>&#34;completed&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>false</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">15</span><span>    <span style=color:#89dceb;font-weight:700>+</span>  <span style=color:#a6e3a1>&#34;completedDate&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>&#34;&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">16</span><span>       <span style=color:#a6e3a1>&#34;contexts&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#89dceb>Array</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">17</span><span>         <span style=color:#a6e3a1>&#34;learn&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">18</span><span>         <span style=color:#a6e3a1>&#34;programming&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">19</span><span>       ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">20</span><span>       <span style=color:#a6e3a1>&#34;due&#34;</span><span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>&#34;2017-04-17&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">21</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">22</span><span>      at <span style=color:#89dceb>Object</span>.<span style=color:#89dceb;font-weight:700>&lt;</span>anonymous<span style=color:#89dceb;font-weight:700>&gt;</span>.test (__tests__<span style=color:#89dceb;font-weight:700>/</span>newTask<span style=color:#89dceb;font-weight:700>-</span>test.js<span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>8</span><span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>25</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">23</span><span>      at process._tickCallback (internal<span style=color:#89dceb;font-weight:700>/</span>process<span style=color:#89dceb;font-weight:700>/</span>next_tick.js<span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>109</span><span style=color:#89dceb;font-weight:700>:</span><span style=color:#fab387>7</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">24</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">25</span><span> PASS  __tests__<span style=color:#89dceb;font-weight:700>/</span>add<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">27</span><span>Snapshot Summary
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">28</span><span> <span style=color:#f38ba8>›</span> <span style=color:#fab387>1</span> snapshot test failed <span style=color:#cba6f7>in</span> <span style=color:#fab387>1</span> test suite. Inspect your code changes or run <span style=color:#f38ba8>with</span> <span style=color:#a6e3a1>`npm test -- -u`</span> to update them.
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">29</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">30</span><span>Test Suites<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>1</span> failed, <span style=color:#fab387>1</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">31</span><span>Tests<span style=color:#89dceb;font-weight:700>:</span>       <span style=color:#fab387>1</span> failed, <span style=color:#fab387>1</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">32</span><span>Snapshots<span style=color:#89dceb;font-weight:700>:</span>   <span style=color:#fab387>1</span> failed, <span style=color:#fab387>1</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">33</span><span>Time<span style=color:#89dceb;font-weight:700>:</span>        <span style=color:#fab387>1.113</span>s
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">34</span><span>Ran all test suites.</span></span></code></pre></div><p>The output of the test run informs me that the <code>Received value does not match stored snapshot 1</code>. That is correct, and it was expected. But more importantly, Jest tells me to inspect my code changes or run the tests again with a specific flag to update the snapshot. Since it was an intentional change, I’m going to run the test again with <code>npm test -- -u</code> to update the Snapshot.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 1</span><span><span style=color:#89dceb;font-weight:700>&gt;</span> jest <span style=color:#a6e3a1>&#34;-u&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 3</span><span> PASS  __tests__<span style=color:#89dceb;font-weight:700>/</span>newTask<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 4</span><span> PASS  __tests__<span style=color:#89dceb;font-weight:700>/</span>add<span style=color:#89dceb;font-weight:700>-</span>test.js
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 6</span><span>Snapshot Summary
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 7</span><span> <span style=color:#f38ba8>›</span> <span style=color:#fab387>1</span> snapshot updated <span style=color:#cba6f7>in</span> <span style=color:#fab387>1</span> test suite.
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c"> 9</span><span>Test Suites<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#fab387>2</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">10</span><span>Tests<span style=color:#89dceb;font-weight:700>:</span>       <span style=color:#fab387>2</span> passed, <span style=color:#fab387>2</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">11</span><span>Snapshots<span style=color:#89dceb;font-weight:700>:</span>   <span style=color:#fab387>1</span> updated, <span style=color:#fab387>1</span> total
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">12</span><span>Time<span style=color:#89dceb;font-weight:700>:</span>        <span style=color:#fab387>1.115</span>s
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">13</span><span>Ran all test suites.</span></span></code></pre></div><p>The Snapshot got updated and reflects the current implementation of my function. Well done! No code is written to create the expected result object. This is where Snapshot testing is awesome.</p><h2 id=summary>Summary</h2><p>I hope that this example helped to understand the Snapshot testing capability of Jest. IMHO, this approach is excellent for two reasons:</p><ol><li>I don&rsquo;t have to write code to compare complex result objects</li><li>Less test code to write, easier to read, more time to work on features</li></ol><p>Snapshot testing might not be necessary/wanted for all kind of tests. You might choose the traditional way for simpler functions. To verify complex result objects, this is an efficient way for testing. Having to write less code is always a great way to improve efficiency.</p><p>Don&rsquo;t hesitate to contact me, if you have questions or suggestions. You can leave a comment below or find me on the social networks mentioned at the top of this post.</p><p><strong>Thank you very much for reading!</strong></p></content><p><a href=https://ingo-richter.io/blog/git/>#Git</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/programming/>#Programming</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/tips/>#Tips</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/tools/>#Tools</a>&nbsp;&nbsp;
<a href=https://ingo-richter.io/blog/til/>#TIL</a>&nbsp;&nbsp;</p><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ingorichterio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer><span>© 2025 Ingo Richter</span>
<span>|
Made with
<a href=https://github.com/maolonglong/hugo-simple/>Hugo ʕ•ᴥ•ʔ Simple</a></span></footer><script id=analytics async src=https://umami.familie-richter.de/script.js data-website-id=98a5f2cb-a53b-4d84-9133-bac4957e9e9f></script></body></html>