<!doctype html><html lang=en><head><meta charset=utf-8><title>Efficient JavaScript Unit Testing with Jest and Snapshots - today is tomorrow's past</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon sizes=180x180 href="https://ingo-richter.io/favicon/apple-touch-icon.png?v=1"><link rel=icon type=image/png sizes=32x32 href="https://ingo-richter.io/favicon/favicon-32x32.png?v=1"><link rel=icon type=image/png sizes=16x16 href="https://ingo-richter.io/favicon/favicon-16x16.png?v=1"><link rel=manifest href="https://ingo-richter.io/favicon/site.webmanifest?v=1"><link rel=mask-icon href="https://ingo-richter.io/favicon/safari-pinned-tab.svg?v=1" color=#ffffff><link rel="shortcut icon" href="https://ingo-richter.io/favicon/favicon.ico?v=1"><meta name=msapplication-config content="/favicon/browserconfig.xml?v=1"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><meta name=generator content="Hugo 0.80.0"><meta property="og:site_name" content="today is tomorrow's past"><meta property="og:title" content="Efficient JavaScript Unit Testing with Jest and Snapshots"><meta property="og:description" content="Make your software testing life easier with Jest and Snapshots to test your javascript code"><meta property="description" content="Make your software testing life easier with Jest and Snapshots to test your javascript code"><meta property="og:url" content="https://ingo-richter.io/post/efficient-unit-testing-with-jest-and-snapshots/"><meta property="og:type" content="article"><meta property="og:image" content="https://ingo-richter.io/img/main/logo.webp"><script async defer data-website-id=f958c0ef-51fe-4b28-8202-f8aac20d92e2 src=https://umami.familie-richter.synology.me/umami.js></script><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css><script src=https://kit.fontawesome.com/be54eb011a.js crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css><link rel=stylesheet href=https://ingo-richter.io/css/main.min.aa4e8165f5b2a16460fcb21582ad412bed8e48e9c5dc49f3b412d1703be4d75d.css integrity="sha256-qk6BZfWyoWRg/LIVgq1BK+2OSOnF3EnztBLRcDvk110="><link rel=stylesheet href=https://ingo-richter.io/css/add-on.css><link rel=stylesheet href=https://ingo-richter.io/css/img.css><link rel=stylesheet href=https://ingo-richter.io/css/baguetteBox.min.css></head><link rel=stylesheet href=https://ingo-richter.io/js/external/baguetteBox.min.33ed436cf22fb08c8c97cc6d4125e6e583cfdac232c8959da40f1d62deedf6ff.css><link rel=stylesheet href=https://ingo-richter.io/sass/image.min.3d526f52c30909f5e3bd6b7b1f5215fd58276d367a318c1ab84c584adc919c94.css><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=https://ingo-richter.io/ class=nav>Efficient JavaScript Unit Testing with Jest and Snapshots</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=https://ingo-richter.io/ class="nav link"><i class="fa fa-home"></i>Home</a>
<a href=https://ingo-richter.io/about/ class="nav link"><i class="far fa-id-card"></i>About</a>
<a href=https://ingo-richter.io/resume/resume.pdf class="nav link"><i class="far fa-file"></i>Resume</a>
<a href=https://ingo-richter.io/post/ class="nav link"><i class="far fa-newspaper"></i>Posts</a>
<a href=https://ingo-richter.io/cv19wfh/ class="nav link"><i class="fas fa-house-damage"></i>CV19WFH</a>
<a href=https://ingo-richter.io/wallpaper/ class="nav link"><i class="fa fa-camera-retro"></i>Wallpaper</a>
<a href=https://ingo-richter.io/categories/ class="nav link"><i class="fas fa-sitemap"></i>Categories</a>
<a href=#share-menu class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
<a href=#search-input class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#share-menu class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class="nav lang-toggle" lang=en>en</a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu><menu id=lang-menu class="flyout-menu menu"><a href=# lang=en class="nav link active">English (en)</a>
<a href=https://ingo-richter.io/de lang=de class="nav no-lang link">Deutsch (de)</a></menu>
<menu id=share-menu class="flyout-menu menu"><h1>Share Post</h1><a href="//twitter.com/share?text=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots&url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f&title=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f&title=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f&description=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by Ingo%20Richter&body=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=https://ingo-richter.io/><img src=https://ingo-richter.io/img/main/logo.webp class=hexagon width=100 alt="today is tomorrow's past"></a><header><h1>today is tomorrow's past</h1></header><main><p>I help people create remarkable things. Customer focus and quality nerd. Opinions are my own. <i class="fa fa-camera-retro" aria-hidden=true></i>Photography is my other passion.<i class="fa fa-hand-peace-o"></i></p></main><footer><ul class=socnet-icons><li><a href=//github.com/ingorichter target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//gitlab.com/ingorichter target=_blank rel=noopener title=GitLab class="fab fa-gitlab"></a></li><li><a href=//stackoverflow.com/users/175020/ingorichter target=_blank rel=noopener title="Stack Overflow" class="fab fa-stack-overflow"></a></li><li><a href=//bitbucket.com/ingorichter target=_blank rel=noopener title=Bitbucket class="fab fa-bitbucket"></a></li><li><a href=//flickr.com/photos/ingorichter target=_blank rel=noopener title=Flickr class="fab fa-flickr"></a></li><li><a href=//medium.com/@ingorichter target=_blank rel=noopener title=Medium class="fab fa-medium"></a></li><li><a href=//www.linkedin.com/in/ingorichter target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//xing.com/profile/Ingo_Richter target=_blank rel=noopener title=Xing class="fab fa-xing"></a></li><li><a href=//reddit.com/user/irichter target=_blank rel=noopener title=Reddit class="fab fa-reddit"></a></li><li><a href=//instagram.com/wayne.schlegel target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/ingorichter target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=//www.pinterest.com/ingorichter target=_blank rel=noopener title=Pinterest class="fab fa-pinterest-p"></a></li><li><a href=//telegram.me/ingorichter target=_blank rel=noopener title=telegram class="fab fa-telegram"></a></li><li><a href=//keybase.io/ingorichter target=_blank rel=noopener title=keybase class="fab fa-keybase"></a></li><li><a href=//mastodon.social/@ingorichter target=_blank rel=noopener title=mastodon class="fab fa-mastodon"></a></li><li><a href=mailto:ingo+blog@ingo-richter.io target=_blank title=Email class="far fa-envelope"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=https://ingo-richter.io/post/efficient-unit-testing-with-jest-and-snapshots/>Efficient JavaScript Unit Testing with Jest and Snapshots</a></h2><p>Make your software testing life easier with Jest and Snapshots to test your javascript code</p></div><div class=meta><time datetime="2017-04-06 11:55:51 -0700 -0700">April 6, 2017</time><p>Ingo Richter</p><p>7-Minute Read</p></div></header><div id=socnet-share><a href="//twitter.com/share?text=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots&url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f&title=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f&title=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f&description=Efficient%20JavaScript%20Unit%20Testing%20with%20Jest%20and%20Snapshots" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=Check%20out%20this%20post%20by Ingo%20Richter&body=https%3a%2f%2fingo-richter.io%2fpost%2fefficient-unit-testing-with-jest-and-snapshots%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></div><div class=content><p>Let&rsquo;s start with a bold statement:</p><blockquote><p><strong>We all love to write unit great tests for our code. More or less.</strong></p><p>— Unknown Programmer</p></blockquote><p>Writing unit tests for my code mostly follows this pattern</p><ol><li>Write a test and make it fail (red)</li><li>Write the function to fix the test (implement function)</li><li>Start over with step 1</li></ol><p>For one of my projects, I was using <a href=https://facebook.github.io/jest/>jest</a>. It&rsquo;s fast now, and it has several features that I highly value. Most of them integrated code coverage and Snapshot testing.</p><h1 id=snapshot-testing-whats-that>Snapshot testing? What&rsquo;s that?</h1><p>When I first saw the part about Snapshot testing, I wasn&rsquo;t interested. Okay, it was more that I thought, well, I don&rsquo;t see a big advantage here over the traditional approach of testing my code. I&rsquo;m calling functions and make sure that the result of those functions matches my expectations. That&rsquo;s pretty simple with a function that returns a simple result
Writing unit tests for my code mostly follows this pattern</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>};
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#34;Verify that 1 + 3 equals 4&#34;</span>, () =&gt; {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span>  <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>add</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>)).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>4</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span>});
</code></pre></div><p>This is simple and doesn’t require much work.</p><p>How about this?</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createTodoItem</span>(<span style=color:#a6e22e>subject</span>, <span style=color:#a6e22e>projects</span>, <span style=color:#a6e22e>contexts</span>, <span style=color:#a6e22e>due</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    <span style=color:#66d9ef>return</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>        <span style=color:#e6db74>&#34;subject&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>subject</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>        <span style=color:#e6db74>&#34;projects&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>projects</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>        <span style=color:#e6db74>&#34;contexts&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>contexts</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#e6db74>&#34;due&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>due</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        <span style=color:#e6db74>&#34;completed&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        <span style=color:#e6db74>&#34;archived&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#e6db74>&#34;isPriority&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>};
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#34;Verify that new todo item has all required fields&#34;</span>, () =&gt; {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newTodoItem</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createTodoItem</span>(<span style=color:#e6db74>&#34;New Task&#34;</span>, [<span style=color:#e6db74>&#34;blog&#34;</span>], [<span style=color:#e6db74>&#34;learn&#34;</span>, <span style=color:#e6db74>&#34;programming&#34;</span>], <span style=color:#e6db74>&#34;2017-04-17&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>expectedTodoItem</span> <span style=color:#f92672>=</span> {}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>newTodoItem</span>).<span style=color:#a6e22e>toEqual</span>(<span style=color:#a6e22e>expectedTodoItem</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>});
</code></pre></div><p>As expected, the output is telling me, that there is something missing. Yes, I didn’t write yet the expected object to compare the result with. I’m too lazy, and I always want to avoid writing it. What I’m doing instead, is to call the function, copy the result and create my expected result object with this data. But for now, I’m not going to do it. Let’s see, how Snapshot testing will help solve this task.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#a6e22e>Verify</span> <span style=color:#a6e22e>that</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>todo</span> <span style=color:#a6e22e>item</span> <span style=color:#a6e22e>has</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>required</span> <span style=color:#a6e22e>fields</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>received</span>).<span style=color:#a6e22e>toEqual</span>(<span style=color:#a6e22e>expected</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#a6e22e>Expected</span> <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>equal</span><span style=color:#f92672>:</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>      {}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#a6e22e>Received</span><span style=color:#f92672>:</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>      {<span style=color:#e6db74>&#34;archived&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>&#34;completed&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>&#34;contexts&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;learn&#34;</span>, <span style=color:#e6db74>&#34;programming&#34;</span>], <span style=color:#e6db74>&#34;due&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2017-04-17&#34;</span>, <span style=color:#e6db74>&#34;isPriority&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>&#34;projects&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;blog&#34;</span>], <span style=color:#e6db74>&#34;subject&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;New Task&#34;</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    <span style=color:#a6e22e>Difference</span><span style=color:#f92672>:</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>    <span style=color:#f92672>-</span> <span style=color:#a6e22e>Expected</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    <span style=color:#f92672>+</span> <span style=color:#a6e22e>Received</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    <span style=color:#f92672>-</span>Object {}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    <span style=color:#f92672>+</span>Object {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;archived&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;completed&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;contexts&#34;</span><span style=color:#f92672>:</span> Array [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>    <span style=color:#f92672>+</span>    <span style=color:#e6db74>&#34;learn&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>    <span style=color:#f92672>+</span>    <span style=color:#e6db74>&#34;programming&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>    <span style=color:#f92672>+</span>  ],
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;due&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2017-04-17&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;isPriority&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;projects&#34;</span><span style=color:#f92672>:</span> Array [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>    <span style=color:#f92672>+</span>    <span style=color:#e6db74>&#34;blog&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    <span style=color:#f92672>+</span>  ],
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;subject&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;New Task&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>    <span style=color:#f92672>+</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>      <span style=color:#a6e22e>at</span> Object.<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>anonymous</span><span style=color:#f92672>&gt;</span>.<span style=color:#a6e22e>test</span> (<span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>newTask</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span><span style=color:#f92672>:</span><span style=color:#ae81ff>7</span><span style=color:#f92672>:</span><span style=color:#ae81ff>25</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>      <span style=color:#a6e22e>at</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>_tickCallback</span> (<span style=color:#a6e22e>internal</span><span style=color:#f92672>/</span><span style=color:#a6e22e>process</span><span style=color:#f92672>/</span><span style=color:#a6e22e>next_tick</span>.<span style=color:#a6e22e>js</span><span style=color:#f92672>:</span><span style=color:#ae81ff>109</span><span style=color:#f92672>:</span><span style=color:#ae81ff>7</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span> <span style=color:#a6e22e>PASS</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>add</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span style=color:#a6e22e>Test</span> <span style=color:#a6e22e>Suites</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>failed</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span style=color:#a6e22e>Tests</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>failed</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span style=color:#a6e22e>Snapshots</span><span style=color:#f92672>:</span>   <span style=color:#ae81ff>0</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span style=color:#a6e22e>Time</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>1.042</span><span style=color:#a6e22e>s</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span style=color:#a6e22e>Ran</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>suites</span>.
</code></pre></div><p>Yeah, I was lazy and didn’t populate <code>expectedTodoItem</code> with all the fields I was expecting. This is the point, where Snapshot testing comes into play. It helps me lazy programmer to avoid writing unnecessary code only to verify my assumptions about the outcome of that function.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createTodoItem</span>(<span style=color:#a6e22e>subject</span>, <span style=color:#a6e22e>projects</span>, <span style=color:#a6e22e>contexts</span>, <span style=color:#a6e22e>due</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>    <span style=color:#66d9ef>return</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>        <span style=color:#e6db74>&#34;subject&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>subject</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>        <span style=color:#e6db74>&#34;projects&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>projects</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>        <span style=color:#e6db74>&#34;contexts&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>contexts</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#e6db74>&#34;due&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>due</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        <span style=color:#e6db74>&#34;completed&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        <span style=color:#e6db74>&#34;archived&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#e6db74>&#34;isPriority&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>};
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#34;Verify that new todo item has all required fields&#34;</span>, () =&gt; {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newTodoItem</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createTodoItem</span>(<span style=color:#e6db74>&#34;New Task&#34;</span>, [<span style=color:#e6db74>&#34;blog&#34;</span>], [<span style=color:#e6db74>&#34;learn&#34;</span>, <span style=color:#e6db74>&#34;programming&#34;</span>], <span style=color:#e6db74>&#34;2017-04-17&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>newTodoItem</span>).<span style=color:#a6e22e>toMatchSnapshot</span>();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>});
</code></pre></div><p>And here the result.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#a6e22e>PASS</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>newTask</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#a6e22e>PASS</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>add</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#a6e22e>Test</span> <span style=color:#a6e22e>Suites</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span style=color:#a6e22e>Tests</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span style=color:#a6e22e>Snapshots</span><span style=color:#f92672>:</span>   <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span style=color:#a6e22e>Time</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>0.816</span><span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>estimated</span> <span style=color:#ae81ff>1</span><span style=color:#a6e22e>s</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span style=color:#a6e22e>Ran</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>suites</span>.
</code></pre></div><h2 id=three-notable-things>Three notable things</h2><ol><li>I still didn’t provide a full-fledged object that matches my expectation</li><li><code>toMatchSnapshot()</code> was the only code change in the test</li><li>The number of Snapshots in the status output of Jest is now 1!</li></ol><p>What happened? Jest was taking a Snapshot for that test and was happy with the result. Under the hood, Jest created a <code>__snapshots__</code> directory in my <code>__tests__</code> directory and saved the output of the test result. The file is named after the file containing the test. In this case, it’s <code>newTask-test.js.snap</code>. Here are the contents of that Snapshot file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#75715e>// Jest Snapshot v1, https://goo.gl/fbAQLP
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#75715e></span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#a6e22e>exports</span>[<span style=color:#e6db74>`Verify that new todo item has all required fields 1`</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>`
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#e6db74>Object {
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#e6db74>  &#34;archived&#34;: false,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#e6db74>  &#34;completed&#34;: false,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#e6db74>  &#34;contexts&#34;: Array [
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#e6db74>    &#34;learn&#34;,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#e6db74>    &#34;programming&#34;,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#e6db74>  ],
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#e6db74>  &#34;due&#34;: &#34;2017-04-17&#34;,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#e6db74>  &#34;isPriority&#34;: false,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#e6db74>  &#34;projects&#34;: Array [
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#e6db74>    &#34;blog&#34;,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#e6db74>  ],
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span style=color:#e6db74>  &#34;subject&#34;: &#34;New Task&#34;,
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#e6db74>}
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span style=color:#e6db74>`</span>;
</code></pre></div><p>The key of the exports object is the name of the test itself. The value of it is the result from <code>createTodoItem("New Task", ["blog"], ["learn", "programming"], "2017-04-17")</code>. That is great. I didn’t have to type a line of code for the expected result of this function. By doing a quick visual inspection of the output, I can confirm that this is the expected output.</p><p>Now it gets interesting. I’m going to change the return object of the function. The result object will have a new key <code>completedDate</code> and the <code>completed</code> flag will be removed. Let’s see how Jest handles the situation without making any change to the existing, and currently passing, test.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span> <span style=color:#a6e22e>FAIL</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>newTask</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>  <span style=color:#960050;background-color:#1e0010>●</span> <span style=color:#a6e22e>Verify</span> <span style=color:#a6e22e>that</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>todo</span> <span style=color:#a6e22e>item</span> <span style=color:#a6e22e>has</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>required</span> <span style=color:#a6e22e>fields</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>value</span>).<span style=color:#a6e22e>toMatchSnapshot</span>()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    <span style=color:#a6e22e>Received</span> <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>does</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>match</span> <span style=color:#a6e22e>stored</span> <span style=color:#a6e22e>snapshot</span> <span style=color:#ae81ff>1.</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#f92672>-</span> <span style=color:#a6e22e>Snapshot</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    <span style=color:#f92672>+</span> <span style=color:#a6e22e>Received</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#960050;background-color:#1e0010>@@</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>8</span> <span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>8</span> <span style=color:#960050;background-color:#1e0010>@@</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>     Object {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>       <span style=color:#e6db74>&#34;archived&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#f92672>-</span>  <span style=color:#e6db74>&#34;completed&#34;</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    <span style=color:#f92672>+</span>  <span style=color:#e6db74>&#34;completedDate&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>       <span style=color:#e6db74>&#34;contexts&#34;</span><span style=color:#f92672>:</span> Array [
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>         <span style=color:#e6db74>&#34;learn&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>         <span style=color:#e6db74>&#34;programming&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>       ],
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>       <span style=color:#e6db74>&#34;due&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;2017-04-17&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>      <span style=color:#a6e22e>at</span> Object.<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>anonymous</span><span style=color:#f92672>&gt;</span>.<span style=color:#a6e22e>test</span> (<span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>newTask</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span><span style=color:#f92672>:</span><span style=color:#ae81ff>8</span><span style=color:#f92672>:</span><span style=color:#ae81ff>25</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>      <span style=color:#a6e22e>at</span> <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>_tickCallback</span> (<span style=color:#a6e22e>internal</span><span style=color:#f92672>/</span><span style=color:#a6e22e>process</span><span style=color:#f92672>/</span><span style=color:#a6e22e>next_tick</span>.<span style=color:#a6e22e>js</span><span style=color:#f92672>:</span><span style=color:#ae81ff>109</span><span style=color:#f92672>:</span><span style=color:#ae81ff>7</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span> <span style=color:#a6e22e>PASS</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>add</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span style=color:#a6e22e>Snapshot</span> <span style=color:#a6e22e>Summary</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span> <span style=color:#960050;background-color:#1e0010>›</span> <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>snapshot</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>failed</span> <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>suite</span>. <span style=color:#a6e22e>Inspect</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>code</span> <span style=color:#a6e22e>changes</span> <span style=color:#a6e22e>or</span> <span style=color:#a6e22e>run</span> <span style=color:#66d9ef>with</span> <span style=color:#e6db74>`npm test -- -u`</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>update</span> <span style=color:#a6e22e>them</span>.
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span style=color:#a6e22e>Test</span> <span style=color:#a6e22e>Suites</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>failed</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span style=color:#a6e22e>Tests</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>failed</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span style=color:#a6e22e>Snapshots</span><span style=color:#f92672>:</span>   <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>failed</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span style=color:#a6e22e>Time</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>1.113</span><span style=color:#a6e22e>s</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span style=color:#a6e22e>Ran</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>suites</span>.
</code></pre></div><p>The output of the test run informs me that the <code>Received value does not match stored snapshot 1</code>. That is correct, and it was expected. But more importantly, Jest tells me to inspect my code changes or run the tests again with a specific flag to update the snapshot. Since it was an intentional change, I’m going to run the test again with <code>npm test -- -u</code> to update the Snapshot.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>jest</span> <span style=color:#e6db74>&#34;-u&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span> <span style=color:#a6e22e>PASS</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>newTask</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span> <span style=color:#a6e22e>PASS</span>  <span style=color:#a6e22e>__tests__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>add</span><span style=color:#f92672>-</span><span style=color:#a6e22e>test</span>.<span style=color:#a6e22e>js</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#a6e22e>Snapshot</span> <span style=color:#a6e22e>Summary</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span> <span style=color:#960050;background-color:#1e0010>›</span> <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>snapshot</span> <span style=color:#a6e22e>updated</span> <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>suite</span>.
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#a6e22e>Test</span> <span style=color:#a6e22e>Suites</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#a6e22e>Tests</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>passed</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#a6e22e>Snapshots</span><span style=color:#f92672>:</span>   <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>updated</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>total</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#a6e22e>Time</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>1.115</span><span style=color:#a6e22e>s</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#a6e22e>Ran</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>suites</span>.
</code></pre></div><p>The Snapshot got updated and reflects the current implementation of my function. Well done! No code is written to create the expected result object. This is where Snapshot testing is awesome.</p><h2 id=summary>Summary</h2><p>I hope that this example helped to understand the Snapshot testing capability of Jest. IMHO, this approach is excellent for two reasons:</p><ol><li>I don&rsquo;t have to write code to compare complex result objects</li><li>Less test code to write, easier to read, more time to work on features</li></ol><p>Snapshot testing might not be necessary/wanted for all kind of tests. You might choose the traditional way for simpler functions. To verify complex result objects, this is an efficient way for testing. Having to write less code is always a great way to improve efficiency.</p><p>Don&rsquo;t hesitate to contact me, if you have questions or suggestions. You can leave a comment below or find me on the social networks mentioned at the top of this post.</p><p><strong>Thank you very much for reading!</strong></p></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=https://ingo-richter.io/categories/git/>Git</a></li><li><a class=article-terms-link href=https://ingo-richter.io/categories/programming/>Programming</a></li></ul><ul class=tags><li><a class=article-terms-link href=https://ingo-richter.io/tags/git/>Git</a></li><li><a class=article-terms-link href=https://ingo-richter.io/tags/programming/>Programming</a></li><li><a class=article-terms-link href=https://ingo-richter.io/tags/tips/>Tips</a></li><li><a class=article-terms-link href=https://ingo-richter.io/tags/tricks/>Tricks</a></li><li><a class=article-terms-link href=https://ingo-richter.io/tags/tools/>Tools</a></li><li><a class=article-terms-link href=https://ingo-richter.io/tags/til/>TIL</a></li></ul></div></footer></article><article class=post><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"ingorichterio"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article><div class=pagination><a href=https://ingo-richter.io/post/effective-git-worktrees/ class="button left"><span>Effective Git - Worktrees</span></a>
<a href=https://ingo-richter.io/post/my-wallpaper-photo-of-the-week/ class="button right"><span>My Wallpaper Photo of the Week</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>Recent Posts</h1></header><article class=mini-post><header><h2><a href=https://ingo-richter.io/cv19wfh/2021/02/day329/>Day329</a></h2><time class=published datetime="2021-02-07 00:00:00 +0000 UTC">February 7, 2021</time></header></article><article class=mini-post><header><h2><a href=https://ingo-richter.io/cv19wfh/2021/01/day310/>Day310</a></h2><time class=published datetime="2021-01-19 00:00:00 +0000 UTC">January 19, 2021</time></header></article><article class=mini-post><header><h2><a href=https://ingo-richter.io/cv19wfh/2020/day240/>Day240</a></h2><time class=published datetime="2020-11-11 00:00:00 +0000 UTC">November 11, 2020</time></header></article><article class=mini-post><header><h2><a href=https://ingo-richter.io/cv19wfh/2020/day218/>Day218</a></h2><time class=published datetime="2020-10-20 00:00:00 +0000 UTC">October 20, 2020</time></header></article><article class=mini-post><header><h2><a href=https://ingo-richter.io/cv19wfh/2020/day205/>Day205</a></h2><time class=published datetime="2020-10-07 00:00:00 +0000 UTC">October 7, 2020</time></header></article><footer><a href=https://ingo-richter.io/post/ class=button>See More</a></footer></section><section id=categories><header><h1><a href=https://ingo-richter.io/categories>Categories</a></h1></header><ul><li><a href=https://ingo-richter.io/categories/cv19wfh/>cv19wfh<span class=count>16</span></a><li><a href=https://ingo-richter.io/categories/wallpaper/>wallpaper<span class=count>8</span></a><li><a href=https://ingo-richter.io/categories/programming/>programming<span class=count>6</span></a><li><a href=https://ingo-richter.io/categories/tips/>tips<span class=count>5</span></a><li><a href=https://ingo-richter.io/categories/git/>git<span class=count>2</span></a><li><a href=https://ingo-richter.io/categories/motivation/>motivation<span class=count>2</span></a><li><a href=https://ingo-richter.io/categories/3dprinting/>3dprinting<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/background/>background<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/bash/>bash<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/content/>content<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/desktop/>desktop<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/diy/>diy<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/doit/>doit<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/encouragement/>encouragement<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/free/>free<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/learn/>learn<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/learntolearn/>learntolearn<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/meetup/>meetup<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/notes/>notes<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/photo/>photo<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/photography/>photography<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/shell/>shell<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/thoughts/>thoughts<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/til/>til<span class=count>1</span></a><li><a href=https://ingo-richter.io/categories/tricks/>tricks<span class=count>1</span></a></li></ul></section><section id=mini-bio><header><h1>About</h1></header><p>Always something to think about</p><footer><a href=https://ingo-richter.io/about class=button>Learn More</a></footer></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/ingorichter target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//gitlab.com/ingorichter target=_blank rel=noopener title=GitLab class="fab fa-gitlab"></a></li><li><a href=//stackoverflow.com/users/175020/ingorichter target=_blank rel=noopener title="Stack Overflow" class="fab fa-stack-overflow"></a></li><li><a href=//bitbucket.com/ingorichter target=_blank rel=noopener title=Bitbucket class="fab fa-bitbucket"></a></li><li><a href=//flickr.com/photos/ingorichter target=_blank rel=noopener title=Flickr class="fab fa-flickr"></a></li><li><a href=//medium.com/@ingorichter target=_blank rel=noopener title=Medium class="fab fa-medium"></a></li><li><a href=//www.linkedin.com/in/ingorichter target=_blank rel=noopener title=LinkedIn class="fab fa-linkedin"></a></li><li><a href=//xing.com/profile/Ingo_Richter target=_blank rel=noopener title=Xing class="fab fa-xing"></a></li><li><a href=//reddit.com/user/irichter target=_blank rel=noopener title=Reddit class="fab fa-reddit"></a></li><li><a href=//instagram.com/wayne.schlegel target=_blank rel=noopener title=Instagram class="fab fa-instagram"></a></li><li><a href=//twitter.com/ingorichter target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=//www.pinterest.com/ingorichter target=_blank rel=noopener title=Pinterest class="fab fa-pinterest-p"></a></li><li><a href=//telegram.me/ingorichter target=_blank rel=noopener title=telegram class="fab fa-telegram"></a></li><li><a href=//keybase.io/ingorichter target=_blank rel=noopener title=keybase class="fab fa-keybase"></a></li><li><a href=//mastodon.social/@ingorichter target=_blank rel=noopener title=mastodon class="fab fa-mastodon"></a></li><li><a href=mailto:ingo+blog@ingo-richter.io target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>© 2021 today is tomorrow's past<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.80.0 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/xml.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/css.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/javascript.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/ini.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/crystal.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/bash.min.js></script><script>hljs.initHighlightingOnLoad();</script><script src=//code.jquery.com/jquery-3.5.1.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.js></script><script src=//unpkg.com/lunr/lunr.js></script><script src=https://ingo-richter.io/js/bundlecdn.min.202e2f977fc8c180ddeb6eab1b3ac44a8bb78dc6d8b74f60dc7f8955c754fdb0.js integrity="sha256-IC4vl3/IwYDd626rGzrESou3jcbYt09g3H+JVcdU/bA="></script><script src=https://ingo-richter.io/js/add-on.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-78867595-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ingo-richter.io/js/scripts.min.js></script></div></body></html>