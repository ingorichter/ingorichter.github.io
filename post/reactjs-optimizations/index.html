<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=/images/favicon.png><title>TIL - Reactjs optimization that cost me some time&nbsp;|&nbsp;Today is Tomorrow's Past</title>
<meta name=title content="TIL - Reactjs optimization that cost me some time"><meta name=description content="I was building a Reactjs component, that should toggle between two child components.






  1<Toggle>
2 <Comp1>
3 <Comp2>
4</Toggle>


The render method of Toggle looked like this






  1render() {
2 const content = React.Children.count(this.props.children) > 0 ? this.props.children[0] : this.props.children[1];
3
4 return (
5  ${content}
6 );
7}

"><meta name=keywords content="TIL,Tips,Programming,JavaScript,Reactjs,"><meta name=author content="Ingo Richter"><meta property="og:url" content="https://ingo-richter.io/post/reactjs-optimizations/"><meta property="og:site_name" content="Today is Tomorrow's Past"><meta property="og:title" content="TIL - Reactjs optimization that cost me some time"><meta property="og:description" content="I was building a Reactjs component, that should toggle between two child components.
1<Toggle> 2 <Comp1> 3 <Comp2> 4</Toggle> The render method of Toggle looked like this 1render() { 2 const content = React.Children.count(this.props.children) > 0 ? this.props.children[0] : this.props.children[1]; 3 4 return ( 5 ${content} 6 ); 7}"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2016-08-15T23:15:51-07:00"><meta property="article:modified_time" content="2016-08-15T23:15:51-07:00"><meta property="article:tag" content="TIL"><meta property="article:tag" content="Tips"><meta property="article:tag" content="Programming"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="Reactjs"><meta name=twitter:card content="summary"><meta name=twitter:title content="TIL - Reactjs optimization that cost me some time"><meta name=twitter:description content="I was building a Reactjs component, that should toggle between two child components.
1<Toggle> 2 <Comp1> 3 <Comp2> 4</Toggle> The render method of Toggle looked like this 1render() { 2 const content = React.Children.count(this.props.children) > 0 ? this.props.children[0] : this.props.children[1]; 3 4 return ( 5 ${content} 6 ); 7}"><meta itemprop=name content="TIL - Reactjs optimization that cost me some time"><meta itemprop=description content="I was building a Reactjs component, that should toggle between two child components.
1<Toggle> 2 <Comp1> 3 <Comp2> 4</Toggle> The render method of Toggle looked like this 1render() { 2 const content = React.Children.count(this.props.children) > 0 ? this.props.children[0] : this.props.children[1]; 3 4 return ( 5 ${content} 6 ); 7}"><meta itemprop=datePublished content="2016-08-15T23:15:51-07:00"><meta itemprop=dateModified content="2016-08-15T23:15:51-07:00"><meta itemprop=wordCount content="150"><meta itemprop=keywords content="TIL,Tips,Programming,JavaScript,Reactjs"><meta name=referrer content="no-referrer-when-downgrade"><link href=/bundle.min.css rel=stylesheet><link rel=alternate type=application/rss+xml href=/post/reactjs-optimizations/index.xml title="Today is Tomorrow's Past"><meta name=fediverse:creator content="@ingorichter@mastodon.social"><script src=/js/scripts.min.js></script></head><body><header><nav><a href=/>Home</a>
<a href=/about/>About</a>
<a href=/resume/resume.pdf>Resume</a>
<a href=/post/>Posts</a>
<a href=/cv19wfh/>CV19WFH</a>
<a href=/wallpaper/>Wallpaper</a>
<a href>Categories</a>
<a href=/index.xml><svg class="icon" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
RSS</a></nav><h1>TIL - Reactjs optimization that cost me some time</h1></header><main><content class=published-date>Published on <time datetime=2016-08-15T23:15:51-07:00>Monday, August 15, 2016</time>
</content><content><p>I was building a Reactjs component, that should toggle between two child components.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span>&lt;<span style=color:#cba6f7>Toggle</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">2</span><span> &lt;<span style=color:#cba6f7>Comp1</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">3</span><span> &lt;<span style=color:#cba6f7>Comp2</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">4</span><span>&lt;/<span style=color:#cba6f7>Toggle</span>&gt;</span></span></code></pre></div><p>The <code>render</code> method of <code>Toggle</code> looked like this<div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">1</span><span>render() {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">2</span><span> <span style=color:#cba6f7>const</span> content <span style=color:#89dceb;font-weight:700>=</span> React.Children.count(<span style=color:#cba6f7>this</span>.props.children) <span style=color:#89dceb;font-weight:700>&gt;</span> <span style=color:#fab387>0</span> <span style=color:#89dceb;font-weight:700>?</span> <span style=color:#cba6f7>this</span>.props.children[<span style=color:#fab387>0</span>] <span style=color:#89dceb;font-weight:700>:</span> <span style=color:#cba6f7>this</span>.props.children[<span style=color:#fab387>1</span>];
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">4</span><span> <span style=color:#cba6f7>return</span> (
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">5</span><span>  ${content}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">6</span><span> );
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f849c">7</span><span>}</span></span></code></pre></div></p><p>Unfortunately, this didn&rsquo;t work (index out of bounds), when I passed only one component instead of two.
This doesn&rsquo;t make sense since the <code>Toggle</code> is supposed to toggle between two components. So, you could argue, that I broke the contract by not passing two child components to <code>Toggle</code>. That is all true.</p><p>What I want to show instead, is the fact that if you pass only one child component, then <code>this.props.children</code> is not an array anymore. <code>this.props.children</code> is the one component. Which explains the index out of bounds error.</p><p>Some information about dealing with <code>this.props.children</code> is available <a href=https://facebook.github.io/react/docs/top-level-api.html>here</a>.</p><p>Thanks for reading!</p></content><p><a href=/blog/til/>#TIL</a>&nbsp;&nbsp;
<a href=/blog/tips/>#Tips</a>&nbsp;&nbsp;
<a href=/blog/programming/>#Programming</a>&nbsp;&nbsp;
<a href=/blog/javascript/>#JavaScript</a>&nbsp;&nbsp;
<a href=/blog/reactjs/>#Reactjs</a>&nbsp;&nbsp;</p><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ingorichterio.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer><span>© 2025 Ingo Richter</span>
<span>|
Made with
<a href=https://github.com/maolonglong/hugo-simple/>Hugo ʕ•ᴥ•ʔ Simple</a></span></footer><script id=analytics async src=https://umami.familie-richter.de/script.js data-website-id=98a5f2cb-a53b-4d84-9133-bac4957e9e9f></script></body></html>